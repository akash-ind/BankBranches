(this.webpackJsonpfyleproject=this.webpackJsonpfyleproject||[]).push([[0],{24:function(t,e,a){},36:function(t,e,a){},37:function(t,e,a){},38:function(t,e,a){},45:function(t,e,a){"use strict";a.r(e);var n=a(1),c=a(0),i=a.n(c),s=a(27),r=a.n(s),o=(a(36),a(17)),h=a(10),l=a(11),j=a(13),u=a(12),d=(a(37),a(49)),b=a(46),f=a(47),O=a(28),p=a(50),x=a(48),v=(a(38),function(t){Object(j.a)(a,t);var e=Object(u.a)(a);function a(){var t;Object(h.a)(this,a);for(var n=arguments.length,c=new Array(n),i=0;i<n;i++)c[i]=arguments[i];return(t=e.call.apply(e,[this].concat(c))).handleClick=function(e){var a=e.target.getAttribute("data-value");t.props.changePage(a)},t}return Object(l.a)(a,[{key:"render",value:function(){var t=[],e=Math.ceil(this.props.itemNo/this.props.pageSize),a=this.props.currentPageNo,c=11,i=1;a-3>1&&(t.push(Object(n.jsx)("td",{"data-value":1,onClick:this.handleClick,children:1},1)),c--,i=1),a-3>2&&(t.push(Object(n.jsx)("td",{children:"..."},"n1")),c--);for(var s=Math.max(1,a-3);s<=a;s++)c--,s!==a?(t.push(Object(n.jsx)("td",{"data-value":s,onClick:this.handleClick,children:s},s)),i=s):(t.push(Object(n.jsx)("td",{className:"selected","data-value":s,onClick:this.handleClick,children:s},s)),i=s);for(var r=a+1;r<=Math.min(e,a+c-2);r++)c--,t.push(Object(n.jsx)("td",{"data-value":r,onClick:this.handleClick,children:r},r)),i=r;return i<e-1&&t.push(Object(n.jsx)("td",{children:"..."},"n2")),i<e&&t.push(Object(n.jsx)("td",{"data-value":e,onClick:this.handleClick,children:e},e)),Object(n.jsx)(b.a,{children:Object(n.jsx)(f.a,{className:"justify-content-center",children:Object(n.jsx)(O.a,{sm:"auto",children:Object(n.jsx)(x.a,{bordered:!0,children:Object(n.jsx)("tbody",{children:Object(n.jsx)("tr",{children:t})})})})})})}}]),a}(c.Component)),g=a(15),y="https://fyle-branch.herokuapp.com",C=(a(24),a(16)),m=a(6),k=function(t){Object(j.a)(a,t);var e=Object(u.a)(a);function a(t){var n;return Object(h.a)(this,a),(n=e.call(this,t)).searchCity=function(t){if(n.state.favourite)return n.favouriteBanks();n.setState({loading:!0});var e=n.props.cacheActions,a=e.hasCache,c=e.getCache,i="".concat(y,"/api/branches/city?limit=").concat(t,"&offset=").concat(n.state.offset,"&q=").concat(n.props.city),s={pageSize:n.state.pageSize,offset:n.state.offset,city:n.props.city};a(i,s)&&!n.state.favouriteChanged?(console.log("Cached data"),n.setData(c(i,s).data)):fetch(i).then((function(t){return console.log(t),t.json()})).then((function(t){console.log(t),n.setData(t),n.props.cacheActions.setCache(i,s,t)}))},n.setData=function(t){n.setState({data:t.results,loading:!1,count:t.count})},n.changePageSize=function(t){0!=t.target.value&&(n.setState({pageSize:t.target.value}),n.searchCity(t.target.value))},n.changePageNo=function(t){n.setState({offset:t-1},(function(){return n.searchCity(n.state.pageSize)}))},n.invertFavourite=function(t){var e=t.target.closest("[data-key]"),a=e.getAttribute("data-key");fetch("".concat(y,"/api/invert-favourite/?id=").concat(a)).then((function(t){return t.json()})).then((function(t){return console.log(t)})),"favourite"===e.getAttribute("class")?e.setAttribute("class",""):e.setAttribute("class","favourite"),n.setState({favouriteChanged:!0})},n.favouriteBanks=function(t){n.setState({loading:!0}),fetch("".concat(y,"/api/get-favourite/?limit=").concat(n.state.pageSize,"&offset=").concat(n.state.offset)).then((function(t){return t.json()})).then((function(t){n.setState({data:t.results,count:t.count,favourite:!0,loading:!1})}))},n.handleFavouriteClick=function(t){n.setState({offset:0},(function(){return n.favouriteBanks()}))},n.allBanks=function(t){n.setState({favourite:!1,offset:0},(function(){return n.searchCity(n.state.pageSize)}))},n.state={pageSize:10,offset:0,data:[],count:0,loading:!1,favourite:!1,favouriteChanged:!1},n}return Object(l.a)(a,[{key:"componentDidUpdate",value:function(t){t.city===this.props.city||this.state.favourite||this.searchCity(this.state.pageSize)}},{key:"componentDidMount",value:function(){this.searchCity(this.state.pageSize)}},{key:"render",value:function(){var t=this,e=this.state.offset*this.state.pageSize+1,a=this.state.favourite;return Object(n.jsxs)(b.a,{children:[Object(n.jsxs)(f.a,{className:"mb-4",children:[Object(n.jsx)(p.a,{variant:a?"primary-outline":"primary",onClick:this.allBanks,children:"All Banks"}),Object(n.jsx)(p.a,{variant:a?"primary":"primary-outline",onClick:this.handleFavouriteClick,children:"Favourite Banks"})]}),Object(n.jsxs)(x.a,{responsive:!0,children:[Object(n.jsx)("thead",{children:Object(n.jsxs)("tr",{children:[Object(n.jsx)("th",{children:"Sno."}),Object(n.jsx)("th",{children:"Branch"}),Object(n.jsx)("th",{children:"City"}),Object(n.jsx)("th",{children:"State"}),Object(n.jsx)("th",{children:"IFSC"}),Object(n.jsx)("th",{children:"Favourite"})]})}),Object(n.jsx)("tbody",{children:this.state.loading?Object(n.jsx)("div",{className:"set-height",children:"Loading..."}):this.state.data.map((function(a){return function(a){var c=a.branch.toLowerCase(),i=a.city.toLowerCase(),s=a.state.toLowerCase(),r=a.ifsc.toLowerCase(),o=a.address.toLowerCase(),h=t.props.query.toLowerCase(),l=t.props.city.toLowerCase();return-1===i.indexOf(l)||-1===c.indexOf(h)&&-1===i.indexOf(h)&&-1===s.indexOf(h)&&-1===r.indexOf(h)&&-1===o.indexOf(h)?null:Object(n.jsxs)("tr",{children:[Object(n.jsx)("td",{children:e++}),Object(n.jsx)("td",{children:Object(n.jsx)(C.b,{to:"bank/"+a.id,children:a.branch})}),Object(n.jsx)("td",{children:a.city}),Object(n.jsx)("td",{children:a.state}),Object(n.jsx)("td",{children:a.ifsc}),Object(n.jsx)("td",{children:a.favourite?Object(n.jsx)(g.a,{className:"favourite scale","data-key":a.id,onClick:t.invertFavourite}):Object(n.jsx)(g.a,{"data-key":a.id,className:"scale",onClick:t.invertFavourite})})]},a.id)}(a)}))})]}),Object(n.jsx)(f.a,{className:"mb-3",children:Object(n.jsx)(O.a,{xs:3,md:2,lg:1,children:Object(n.jsx)(d.a.Control,{type:"number",onChange:this.changePageSize,value:this.state.pageSize})})}),Object(n.jsx)(v,{changePage:this.changePageNo,itemNo:this.state.count,pageSize:this.state.pageSize,currentPageNo:this.state.offset+1})]})}}]),a}(c.Component),S=Object(m.f)(k),N=a(30),z=a.n(N),B=function(t){Object(j.a)(a,t);var e=Object(u.a)(a);function a(t){var n;return Object(h.a)(this,a),(n=e.call(this,t)).state={loading:!1,data:null},n}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var t=this;this.setState({loading:!0});var e="".concat(y,"/api/bank/").concat(this.props.match.params.id);fetch(e).then((function(t){return t.json()})).then((function(e){return t.setState({data:e,loading:!1})}))}},{key:"render",value:function(){var t=this.state.data;return this.state.loading||!t?Object(n.jsx)(b.a,{children:"Loading..."}):Object(n.jsxs)("div",{children:[Object(n.jsx)(f.a,{className:"justify-content-end",children:Object(n.jsx)(O.a,{sm:"auto",children:t.favorite?Object(n.jsx)(g.a,{className:"favourite scale"}):Object(n.jsx)(g.a,{className:"scale"})})}),Object(n.jsx)("h3",{children:t.bank_id.name}),Object(n.jsxs)(x.a,{responsive:!0,children:[Object(n.jsx)("thead",{children:Object(n.jsxs)("tr",{children:[Object(n.jsx)("th",{children:"Branch"}),Object(n.jsx)("th",{children:"City"}),Object(n.jsx)("th",{children:"State"}),Object(n.jsx)("th",{children:"IFSC"})]})}),Object(n.jsx)("tbody",{children:Object(n.jsxs)("tr",{children:[Object(n.jsx)("td",{children:t.branch}),Object(n.jsxs)("td",{children:["City: ",t.city]}),Object(n.jsxs)("td",{children:["State: ",t.state]}),Object(n.jsxs)("td",{children:["IFSC: ",t.ifsc]})]})})]})]})}}]),a}(c.Component),F=Object(m.f)(B),w=function(t){Object(j.a)(a,t);var e=Object(u.a)(a);function a(){var t;Object(h.a)(this,a);for(var n=arguments.length,c=new Array(n),i=0;i<n;i++)c[i]=arguments[i];return(t=e.call.apply(e,[this].concat(c))).changeCity=function(e){t.props.changeCity(e.target.value)},t}return Object(l.a)(a,[{key:"render",value:function(){return Object(n.jsx)(d.a.Group,{controlId:"exampleForm.SelectCustom",children:Object(n.jsxs)(d.a.Control,{as:"select",value:this.props.city,onChange:this.changeCity,custom:!0,children:[Object(n.jsx)("option",{value:"",children:"Select City"}),Object(n.jsx)("option",{value:"delhi",children:"Delhi"}),Object(n.jsx)("option",{value:"bangalore",children:"Bangalore"}),Object(n.jsx)("option",{value:"mumbai",children:"Mumbai"}),Object(n.jsx)("option",{value:"chennai",children:"Chennai"}),Object(n.jsx)("option",{value:"kolkata",children:"Kolkata"})]})})}}]),a}(c.Component),A=function(t){Object(j.a)(a,t);var e=Object(u.a)(a);function a(){var t;Object(h.a)(this,a);for(var n=arguments.length,c=new Array(n),i=0;i<n;i++)c[i]=arguments[i];return(t=e.call.apply(e,[this].concat(c))).changeQuery=function(e){t.props.changeQuery(e.target.value)},t}return Object(l.a)(a,[{key:"render",value:function(){return Object(n.jsx)(d.a.Control,{type:"text",placeholder:"Search",onChange:this.changeQuery,value:this.props.city})}}]),a}(c.Component),L=function(t){Object(j.a)(a,t);var e=Object(u.a)(a);function a(){var t;return Object(h.a)(this,a),(t=e.call(this)).state={city:"",query:""},t.changeCity=t.changeCity.bind(Object(o.a)(t)),t.changeQuery=t.changeQuery.bind(Object(o.a)(t)),t}return Object(l.a)(a,[{key:"changeCity",value:function(t){this.setState({city:t})}},{key:"changeQuery",value:function(t){this.setState({query:t})}},{key:"render",value:function(){var t=this;return Object(n.jsx)(z.a,{children:function(e){e.store;var a=e.actions;return Object(n.jsx)(C.a,{basename:"/BankBranches",children:Object(n.jsxs)(m.c,{children:[Object(n.jsx)(m.a,{exact:!0,path:"/",children:Object(n.jsxs)(b.a,{children:[Object(n.jsx)("h3",{children:"Bank List"}),Object(n.jsxs)(f.a,{className:"justify-content-between",children:[Object(n.jsx)(O.a,{xs:12,lg:4,className:"mb-2",children:Object(n.jsx)(w,{city:t.state.city,changeCity:t.changeCity})}),Object(n.jsx)(O.a,{xs:12,lg:4,className:"mb-2",children:Object(n.jsx)(A,{changeQuery:t.changeQuery,query:t.state.query})})]}),Object(n.jsx)(f.a,{className:!0,children:Object(n.jsx)(S,{city:t.state.city,query:t.state.query,cacheActions:a})})]})}),Object(n.jsx)(m.a,{exact:!0,path:"/bank/:id",children:Object(n.jsx)(b.a,{children:Object(n.jsx)(F,{})})})]})})}})}}]),a}(c.Component),P=function(t){t&&t instanceof Function&&a.e(3).then(a.bind(null,51)).then((function(e){var a=e.getCLS,n=e.getFID,c=e.getFCP,i=e.getLCP,s=e.getTTFB;a(t),n(t),c(t),i(t),s(t)}))};r.a.render(Object(n.jsx)(i.a.StrictMode,{children:Object(n.jsx)(L,{})}),document.getElementById("root")),P()}},[[45,1,2]]]);
//# sourceMappingURL=main.edf4b33b.chunk.js.map