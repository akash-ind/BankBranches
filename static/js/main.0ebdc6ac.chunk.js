(this.webpackJsonpfyleproject=this.webpackJsonpfyleproject||[]).push([[0],{24:function(t,e,a){},36:function(t,e,a){},37:function(t,e,a){},38:function(t,e,a){},45:function(t,e,a){"use strict";a.r(e);var c=a(1),n=a(0),i=a.n(n),s=a(27),r=a.n(s),o=(a(36),a(17)),h=a(10),l=a(11),j=a(13),u=a(12),d=(a(37),a(49)),b=a(46),f=a(47),O=a(28),p=a(50),x=a(48),v=(a(38),function(t){Object(j.a)(a,t);var e=Object(u.a)(a);function a(){var t;Object(h.a)(this,a);for(var c=arguments.length,n=new Array(c),i=0;i<c;i++)n[i]=arguments[i];return(t=e.call.apply(e,[this].concat(n))).handleClick=function(e){var a=e.target.getAttribute("data-value");t.props.changePage(a)},t}return Object(l.a)(a,[{key:"render",value:function(){var t=[],e=Math.ceil(this.props.itemNo/this.props.pageSize),a=this.props.currentPageNo,n=11,i=1;a-3>1&&(t.push(Object(c.jsx)("td",{"data-value":1,onClick:this.handleClick,children:1},1)),n--,i=1),a-3>2&&(t.push(Object(c.jsx)("td",{children:"..."},"n1")),n--);for(var s=Math.max(1,a-3);s<=a;s++)n--,s!==a?(t.push(Object(c.jsx)("td",{"data-value":s,onClick:this.handleClick,children:s},s)),i=s):(t.push(Object(c.jsx)("td",{className:"selected","data-value":s,onClick:this.handleClick,children:s},s)),i=s);for(var r=a+1;r<=Math.min(e,a+n-2);r++)n--,t.push(Object(c.jsx)("td",{"data-value":r,onClick:this.handleClick,children:r},r)),i=r;return i<e-1&&t.push(Object(c.jsx)("td",{children:"..."},"n2")),i<e&&t.push(Object(c.jsx)("td",{"data-value":e,onClick:this.handleClick,children:e},e)),Object(c.jsx)(b.a,{children:Object(c.jsx)(f.a,{className:"justify-content-center",children:Object(c.jsx)(O.a,{sm:"auto",children:Object(c.jsx)(x.a,{bordered:!0,children:Object(c.jsx)("tbody",{children:Object(c.jsx)("tr",{children:t})})})})})})}}]),a}(n.Component)),g=a(15),y="https://fyle-branch.herokuapp.com",C=(a(24),a(16)),m=a(6),k=function(t){Object(j.a)(a,t);var e=Object(u.a)(a);function a(t){var c;return Object(h.a)(this,a),(c=e.call(this,t)).searchCity=function(t){if(c.state.favourite)return c.favouriteBanks();c.setState({loading:!0});var e=c.props.cacheActions,a=e.hasCache,n=e.getCache,i="".concat(y,"/api/branches/city?limit=").concat(t,"&offset=").concat(c.state.offset,"&q=").concat(c.props.city),s={pageSize:c.state.pageSize,offset:c.state.offset,city:c.props.city};a(i,s)&&!c.state.favouriteChanged?(console.log("Cached data"),c.setData(n(i,s).data)):fetch(i).then((function(t){return console.log(t),t.json()})).then((function(t){console.log(t),c.setData(t),c.props.cacheActions.setCache(i,s,t)}))},c.setData=function(t){c.setState({data:t.results,loading:!1,count:t.count})},c.changePageSize=function(t){0!=t.target.value&&(c.setState({pageSize:t.target.value}),c.searchCity(t.target.value))},c.changePageNo=function(t){c.setState({offset:t-1},(function(){return c.searchCity(c.state.pageSize)}))},c.invertFavourite=function(t){var e=t.target.closest("[data-key]"),a=e.getAttribute("data-key");fetch("".concat(y,"/api/invert-favourite/?id=").concat(a)).then((function(t){return t.json()})).then((function(t){return console.log(t)})),"favourite"===e.getAttribute("class")?e.setAttribute("class",""):e.setAttribute("class","favourite"),c.setState({favouriteChanged:!0})},c.favouriteBanks=function(t){c.setState({loading:!0}),fetch("".concat(y,"/api/get-favourite/?limit=").concat(c.state.pageSize,"&offset=").concat(c.state.offset)).then((function(t){return t.json()})).then((function(t){c.setState({data:t.results,count:t.count,favourite:!0,loading:!1})}))},c.handleFavouriteClick=function(t){c.setState({offset:0},(function(){return c.favouriteBanks()}))},c.allBanks=function(t){c.setState({favourite:!1,offset:0},(function(){return c.searchCity(c.state.pageSize)}))},c.state={pageSize:10,offset:0,data:[],count:0,loading:!1,favourite:!1,favouriteChanged:!1},c}return Object(l.a)(a,[{key:"componentDidUpdate",value:function(t){t.city===this.props.city||this.state.favourite||this.searchCity(this.state.pageSize)}},{key:"componentDidMount",value:function(){this.searchCity(this.state.pageSize)}},{key:"render",value:function(){var t=this,e=this.state.offset*this.state.pageSize+1,a=this.state.favourite;return Object(c.jsxs)(b.a,{children:[Object(c.jsxs)(f.a,{className:"mb-4",children:[Object(c.jsx)(p.a,{variant:a?"primary-outline":"primary",onClick:this.allBanks,children:"All Banks"}),Object(c.jsx)(p.a,{variant:a?"primary":"primary-outline",onClick:this.handleFavouriteClick,children:"Favourite Banks"})]}),Object(c.jsxs)(x.a,{responsive:!0,children:[Object(c.jsx)("thead",{children:Object(c.jsxs)("tr",{children:[Object(c.jsx)("th",{children:"Sno."}),Object(c.jsx)("th",{children:"Branch"}),Object(c.jsx)("th",{children:"City"}),Object(c.jsx)("th",{children:"State"}),Object(c.jsx)("th",{children:"IFSC"}),Object(c.jsx)("th",{children:"Favourite"})]})}),Object(c.jsx)("tbody",{children:this.state.loading?Object(c.jsx)("div",{className:"set-height",children:"Loading..."}):this.state.data.map((function(a){return function(a){var n=a.branch.toLowerCase(),i=a.city.toLowerCase(),s=a.state.toLowerCase(),r=a.ifsc.toLowerCase(),o=a.address.toLowerCase(),h=t.props.query.toLowerCase(),l=t.props.city.toLowerCase();return-1===i.indexOf(l)||-1===n.indexOf(h)&&-1===i.indexOf(h)&&-1===s.indexOf(h)&&-1===r.indexOf(h)&&-1===o.indexOf(h)?null:Object(c.jsxs)("tr",{children:[Object(c.jsx)("td",{children:e++}),Object(c.jsx)("td",{children:Object(c.jsx)(C.b,{to:"bank/"+a.id,children:a.branch})}),Object(c.jsx)("td",{children:a.city}),Object(c.jsx)("td",{children:a.state}),Object(c.jsx)("td",{children:a.ifsc}),Object(c.jsx)("td",{children:a.favourite?Object(c.jsx)(g.a,{className:"favourite scale","data-key":a.id,onClick:t.invertFavourite}):Object(c.jsx)(g.a,{"data-key":a.id,className:"scale",onClick:t.invertFavourite})})]},a.id)}(a)}))})]}),Object(c.jsx)(f.a,{className:"mb-3",children:Object(c.jsx)(O.a,{xs:3,md:2,lg:1,children:Object(c.jsx)(d.a.Control,{type:"number",onChange:this.changePageSize,value:this.state.pageSize})})}),Object(c.jsx)(v,{changePage:this.changePageNo,itemNo:this.state.count,pageSize:this.state.pageSize,currentPageNo:this.state.offset+1})]})}}]),a}(n.Component),S=Object(m.f)(k),N=a(30),z=a.n(N),F=function(t){Object(j.a)(a,t);var e=Object(u.a)(a);function a(t){var c;return Object(h.a)(this,a),(c=e.call(this,t)).state={loading:!1,data:null},c}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var t=this;this.setState({loading:!0});var e="".concat(y,"/api/bank/").concat(this.props.match.params.id);fetch(e).then((function(t){return t.json()})).then((function(e){return t.setState({data:e,loading:!1})}))}},{key:"render",value:function(){var t=this.state.data;return this.state.loading||!t?Object(c.jsx)(b.a,{children:"Loading..."}):Object(c.jsxs)("div",{children:[Object(c.jsx)(f.a,{className:"justify-content-end",children:Object(c.jsx)(O.a,{sm:"auto",children:t.favorite?Object(c.jsx)(g.a,{className:"favourite scale"}):Object(c.jsx)(g.a,{className:"scale"})})}),Object(c.jsx)("h3",{children:t.bank_id.name}),Object(c.jsxs)(x.a,{responsive:!0,children:[Object(c.jsx)("thead",{children:Object(c.jsxs)("tr",{children:[Object(c.jsx)("th",{children:"Branch"}),Object(c.jsx)("th",{children:"City"}),Object(c.jsx)("th",{children:"State"}),Object(c.jsx)("th",{children:"IFSC"})]})}),Object(c.jsx)("tbody",{children:Object(c.jsxs)("tr",{children:[Object(c.jsx)("td",{children:t.branch}),Object(c.jsxs)("td",{children:["City: ",t.city]}),Object(c.jsxs)("td",{children:["State: ",t.state]}),Object(c.jsxs)("td",{children:["IFSC: ",t.ifsc]})]})})]})]})}}]),a}(n.Component),w=Object(m.f)(F),B=function(t){Object(j.a)(a,t);var e=Object(u.a)(a);function a(){var t;Object(h.a)(this,a);for(var c=arguments.length,n=new Array(c),i=0;i<c;i++)n[i]=arguments[i];return(t=e.call.apply(e,[this].concat(n))).changeCity=function(e){t.props.changeCity(e.target.value)},t}return Object(l.a)(a,[{key:"render",value:function(){return Object(c.jsx)(d.a.Group,{controlId:"exampleForm.SelectCustom",children:Object(c.jsxs)(d.a.Control,{as:"select",value:this.props.city,onChange:this.changeCity,custom:!0,children:[Object(c.jsx)("option",{value:"",children:"Select City"}),Object(c.jsx)("option",{value:"delhi",children:"Delhi"}),Object(c.jsx)("option",{value:"bangalore",children:"Bangalore"}),Object(c.jsx)("option",{value:"mumbai",children:"Mumbai"}),Object(c.jsx)("option",{value:"chennai",children:"Chennai"}),Object(c.jsx)("option",{value:"kolkata",children:"Kolkata"})]})})}}]),a}(n.Component),A=function(t){Object(j.a)(a,t);var e=Object(u.a)(a);function a(){var t;Object(h.a)(this,a);for(var c=arguments.length,n=new Array(c),i=0;i<c;i++)n[i]=arguments[i];return(t=e.call.apply(e,[this].concat(n))).changeQuery=function(e){t.props.changeQuery(e.target.value)},t}return Object(l.a)(a,[{key:"render",value:function(){return Object(c.jsx)(d.a.Control,{type:"text",placeholder:"Search",onChange:this.changeQuery,value:this.props.city})}}]),a}(n.Component),L=function(t){Object(j.a)(a,t);var e=Object(u.a)(a);function a(){var t;return Object(h.a)(this,a),(t=e.call(this)).state={city:"",query:""},t.changeCity=t.changeCity.bind(Object(o.a)(t)),t.changeQuery=t.changeQuery.bind(Object(o.a)(t)),t}return Object(l.a)(a,[{key:"changeCity",value:function(t){this.setState({city:t})}},{key:"changeQuery",value:function(t){this.setState({query:t})}},{key:"render",value:function(){var t=this;return Object(c.jsx)(z.a,{children:function(e){e.store;var a=e.actions;return Object(c.jsx)(C.a,{children:Object(c.jsxs)(m.c,{children:[Object(c.jsx)(m.a,{exact:!0,path:"/",children:Object(c.jsxs)(b.a,{children:[Object(c.jsx)("h3",{children:"Bank List"}),Object(c.jsxs)(f.a,{className:"justify-content-between",children:[Object(c.jsx)(O.a,{xs:12,lg:4,className:"mb-2",children:Object(c.jsx)(B,{city:t.state.city,changeCity:t.changeCity})}),Object(c.jsx)(O.a,{xs:12,lg:4,className:"mb-2",children:Object(c.jsx)(A,{changeQuery:t.changeQuery,query:t.state.query})})]}),Object(c.jsx)(f.a,{className:!0,children:Object(c.jsx)(S,{city:t.state.city,query:t.state.query,cacheActions:a})})]})}),Object(c.jsx)(m.a,{exact:!0,path:"/bank/:id",children:Object(c.jsx)(b.a,{children:Object(c.jsx)(w,{})})})]})})}})}}]),a}(n.Component),P=function(t){t&&t instanceof Function&&a.e(3).then(a.bind(null,51)).then((function(e){var a=e.getCLS,c=e.getFID,n=e.getFCP,i=e.getLCP,s=e.getTTFB;a(t),c(t),n(t),i(t),s(t)}))};r.a.render(Object(c.jsx)(i.a.StrictMode,{children:Object(c.jsx)(L,{})}),document.getElementById("root")),P()}},[[45,1,2]]]);
//# sourceMappingURL=main.0ebdc6ac.chunk.js.map